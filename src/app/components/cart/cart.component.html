<div *ngIf="cartItems.length > 0; else emptyCart">
  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"
  >
    <div
      *ngFor="let item of cartItems"
      class="card bg-base-100 shadow-lg rounded-lg p-4"
      tabindex="0"
    >
      <a [routerLink]="['/infoDetails', item.productId]" class="block">
        <figure class="flex justify-center">
          <img
            [src]="item.imageUrl"
            class="h-40 w-40 object-cover rounded-md"
            alt="{{ item.description }}"
          />
        </figure>
      </a>

      <div class="card-body flex flex-col justify-between">
        <h2 class="text-lg font-semibold truncate">
          {{ item.name | titlecase }}
        </h2>
        <p class="text-sm text-gray-500 truncate">{{ item.description }}</p>

        <!-- SeÃ§Ã£o de Quantidade e PreÃ§o -->
        <div class="flex items-center justify-between mt-4">
          <span class="text-lg font-bold text-primary">
            {{ item.price | currency : "BRL" }}
          </span>
          <div class="flex items-center gap-4">
            <button
              class="btn btn-sm btn-secondary px-3"
              (click)="decreaseQuantity(item)"
              aria-label="Diminuir quantidade"
            >
              -
            </button>
            <span class="text-lg font-medium">{{ item.quantity }}</span>
            <button
              class="btn btn-sm btn-secondary px-3"
              (click)="increaseQuantity(item)"
              aria-label="Aumentar quantidade"
            >
              +
            </button>
          </div>
        </div>

        <!-- PreÃ§o total do item -->
        <p class="text-sm text-gray-600 mt-2">
          Total: <strong>{{ getItemTotal(item) | currency : "BRL" }}</strong>
        </p>

        <!-- AÃ§Ãµes -->
        <div class="flex justify-between mt-4">
          <button class="btn btn-error btn-sm" (click)="removeFromCart(item)">
            Remover
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- BotÃ£o para finalizar a compra -->
  <div class="flex justify-center mt-10">
    <button
      class="btn btn-success text-lg px-8 py-3"
      (click)="finalizePurchase()"
      [disabled]="cartItems.length === 0"
    >
      Finalizar Compra ({{ getTotalPrice() | currency : "BRL" }})
    </button>
  </div>
</div>

<!-- Se o carrinho estiver vazio -->
<ng-template #emptyCart>
  <div class="text-center p-10">
    <h2 class="text-2xl font-semibold">Seu carrinho estÃ¡ vazio! ðŸ›’</h2>
    <p class="text-gray-500 mt-2">Adicione alguns produtos para continuar.</p>
    <a routerLink="/" class="btn btn-primary mt-4">Ver produtos</a>
  </div>
</ng-template>
